webpackJsonp([2],{EGNK:function(e,t){},kn9h:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"secondMes"},[a("el-form",{ref:"searchForm",staticClass:"demo-form-inline",attrs:{inline:!0,align:"left","label-position":"right","label-width":"80px",model:e.searchForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"时间从",prop:"starttime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{"value-format":"yyyy-MM-dd hh:mm:ss",type:"datetime",placeholder:"起始时间"},model:{value:e.searchForm.starttime,callback:function(t){e.$set(e.searchForm,"starttime",t)},expression:"searchForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"至",prop:"endtime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{"value-format":"yyyy-MM-dd hh:mm:ss",type:"datetime",placeholder:"截止时间"},model:{value:e.searchForm.endtime,callback:function(t){e.$set(e.searchForm,"endtime",t)},expression:"searchForm.endtime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名",prop:"projectName"}},[a("el-select",{attrs:{placeholder:"项目名"},model:{value:e.searchForm.projectName,callback:function(t){e.$set(e.searchForm,"projectName",t)},expression:"searchForm.projectName"}},e._l(e.projects,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"品名",prop:"itemName"}},[a("el-select",{attrs:{placeholder:"品名"},model:{value:e.searchForm.itemName,callback:function(t){e.$set(e.searchForm,"itemName",t)},expression:"searchForm.itemName"}},e._l(e.items,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"模具号",prop:"modelNum"}},[a("el-input",{attrs:{placeholder:"模具号"},model:{value:e.searchForm.modelNum,callback:function(t){e.$set(e.searchForm,"modelNum",t)},expression:"searchForm.modelNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"穴号",prop:"hole"}},[a("el-select",{attrs:{placeholder:"穴号"},model:{value:e.searchForm.hole,callback:function(t){e.$set(e.searchForm,"hole",t)},expression:"searchForm.hole"}},e._l(e.holes,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"机台",prop:"machine"}},[a("el-input",{attrs:{placeholder:"机台"},model:{value:e.searchForm.machine,callback:function(t){e.$set(e.searchForm,"machine",t)},expression:"searchForm.machine"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"sfcStatus"}},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.searchForm.sfcStatus,callback:function(t){e.$set(e.searchForm,"sfcStatus",t)},expression:"searchForm.sfcStatus"}},e._l(e.sfcStatus,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"66px"},attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-error",type:"primary"},on:{click:function(t){e.onClear()}}},[e._v("清空")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",stripe:"",data:e.tableData3,"empty-text":"暂无数据(请输入条件后查询)","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sfc",label:"批次",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectName",label:"项目名",align:"center",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"itemName",label:"品名",align:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"model",label:"模具",align:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hole",label:"穴号",align:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resrce",label:"机台",align:"left",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sfcstatus",label:"状态",align:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"当前工序",align:"left",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTimeStr",label:"流程卡打印时间",align:"left"}})],1),e._v(" "),a("br"),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8,align:"left"}},[a("el-button",{attrs:{disabled:e.btndisabled,type:"warning",size:"small"},on:{click:e.freeze}},[e._v("批量冻结")]),e._v(" "),a("el-button",{attrs:{disabled:e.btndisabled,type:"primary",size:"small"},on:{click:e.unfreeze}},[e._v("批量解冻")]),e._v(" "),a("el-button",{attrs:{disabled:e.btndisabled,type:"danger",size:"small"},on:{click:e.discard}},[e._v("批量废弃")])],1),e._v(" "),a("el-col",{attrs:{span:16,align:"right"}},[a("el-pagination",{attrs:{background:"","page-size":e.pageSize,"page-sizes":[50,100,150,200],layout:"total, sizes, prev, pager, next","current-page":e.currentPage,total:e.totalCount},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")({data:function(){return{loading:!1,totalCount:-1,currentPage:1,pageSize:50,site:"",projects:[],items:[],holes:[],sfcStatus:[],searchForm:{starttime:"",endtime:"",projectName:"",itemName:"",modelNum:"",hole:"",machine:""},rules:{starttime:[{required:!0,message:"请选择起始时间",trigger:"change"}],endtime:[{required:!0,message:"请选择截止时间",trigger:"change"}],projectName:[{required:!0,message:"请输入项目名",trigger:"change"}],itemName:[{required:!0,message:"请输入品名",trigger:"change"}],modelNum:[{required:!0,message:"请输入模具号",trigger:"change"}],hole:[{required:!0,message:"请输入穴号",trigger:"change"}]},tableData3:[],multipleSelection:[],btndisabled:!0}},mounted:function(){this.site=this.$route.query.info,this.initDictionary()},methods:{initDictionary:function(){var e=this;this.getRequest("/sfc/dictionary?site="+this.site).then(function(t){t&&200===t.status&&(e.projects=t.data.projects,e.items=t.data.items,e.holes=t.data.holes,e.sfcStatus=t.data.sfcStatus)})},loadData:function(){var e=this;this.loading=!0;var t=this.searchForm;t.pageNum=this.currentPage,t.pageSize=this.pageSize,t.site=this.site,this.getRequest("/sfc/all",t).then(function(t){e.loading=!1,t&&200===t.status&&(e.tableData3=t.data.list,e.totalCount=t.data.total)})},currentChange:function(e){this.currentPage=e,this.loadData()},sizeChange:function(e){this.pageSize=e,this.loadData()},handleSelectionChange:function(e){this.multipleSelection=e,0===e.length?this.btndisabled=!0:this.btndisabled=!1},onSearch:function(){var e=this;this.$refs.searchForm.validate(function(t){if(!t)return!1;e.loadData()})},onClear:function(){this.$refs.searchForm.resetFields()},freeze:function(){this.confirmAndAct(this.multipleSelection,"freeze")},unfreeze:function(){this.confirmAndAct(this.multipleSelection,"unfreeze")},discard:function(){this.confirmAndAct(this.multipleSelection,"discard")},confirmAndAct:function(e,t){var a=this,l=e.map(function(e){return e.handle}).join("**"),r="";r='<span style="color:green;font-weight:bold">['+(r="freeze"===t?"批量冻结":"unfreeze"===t?"批量解冻":"废弃")+"]</span>",this.$prompt("确定要进行"+r+"的操作吗?请输入操作备注:","提示",{dangerouslyUseHTMLString:!0}).then(function(r){var s=r.value,i={};i.handles=l,i.tag=t,i.site=a.site,i.comment=s,i.qty=e.map(function(e){return e.qty}).join("**"),a.postRequest("/sfc/act",i).then(function(e){e&&200===e.status?0===e.data.code?(a.loadData(),a.$message({type:"success",message:"操作成功!"})):(a.$message.error(e.data.message),a.loading=!1):(a.$message.error("服务器错误"),a.loading=!1)}),a.loading=!0})}}},l,!1,function(e){a("EGNK")},"data-v-62efe2db",null);t.default=r.exports}});
//# sourceMappingURL=2.70d9650fb5cfdf2010a6.js.map